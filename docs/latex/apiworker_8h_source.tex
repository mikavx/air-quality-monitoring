\doxysection{apiworker.\+h}
\hypertarget{apiworker_8h_source}{}\label{apiworker_8h_source}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ APIWORKER\_H}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ APIWORKER\_H}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <QObject>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <QNetworkAccessManager>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <QNetworkReply>}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <QList>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <QString>}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <QJsonObject>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <QJsonArray>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <QJsonDocument>}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ <QUrl>}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ <QJsonParseError>}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ <QVariant>}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ <QDateTime>}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_station_info}{StationInfo}}\ \{}
\DoxyCodeLine{00018\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{struct_station_info_a48c8425b0fad13c87e329f51eed20e85}{id}};}
\DoxyCodeLine{00019\ \ \ \ \ QString\ \mbox{\hyperlink{struct_station_info_a286c8ac08ea12a60a4182ab86900f579}{stationName}};}
\DoxyCodeLine{00020\ \ \ \ \ QString\ \mbox{\hyperlink{struct_station_info_a0faa2c7ac5cc012ba81b1b0248236d95}{cityName}};}
\DoxyCodeLine{00021\ \};}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_sensor_info}{SensorInfo}}\ \{}
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{struct_sensor_info_ac55cc3e69e4bfb30dbd1f95faba4c2e2}{id}};}
\DoxyCodeLine{00025\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{struct_sensor_info_a72ec03042539948c0a791435c9f369c8}{stationId}};}
\DoxyCodeLine{00026\ \ \ \ \ QString\ \mbox{\hyperlink{struct_sensor_info_acf5b49f4fe24beb145966c8bb5e9ffe8}{paramName}};}
\DoxyCodeLine{00027\ \ \ \ \ QString\ \mbox{\hyperlink{struct_sensor_info_a0663d00f8428d15709438c7518f67af1}{paramFormula}};}
\DoxyCodeLine{00028\ \ \ \ \ QString\ \mbox{\hyperlink{struct_sensor_info_a0a92fab99949810f8afda5c435b6cfde}{paramCode}};}
\DoxyCodeLine{00029\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{struct_sensor_info_af0e1b23f88e360f29f056c4069d26494}{idParam}};}
\DoxyCodeLine{00030\ \};}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_measurement}{Measurement}}\ \{}
\DoxyCodeLine{00033\ \ \ \ \ QDateTime\ \mbox{\hyperlink{struct_measurement_a80103a2df03c90f32ff933fa886d90c4}{date}};}
\DoxyCodeLine{00034\ \ \ \ \ QVariant\ \mbox{\hyperlink{struct_measurement_a04b98cd60a19d4e52ebd1f4f30e14fc2}{value}};}
\DoxyCodeLine{00035\ \};}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_measurement_data}{MeasurementData}}\ \{}
\DoxyCodeLine{00038\ \ \ \ \ QString\ \mbox{\hyperlink{struct_measurement_data_ac64eb05d815553a394bc7703fc9ec196}{key}};}
\DoxyCodeLine{00039\ \ \ \ \ QList<Measurement>\ \mbox{\hyperlink{struct_measurement_data_a125a82a40bccc38e2aa50ff9c90588e0}{values}};}
\DoxyCodeLine{00040\ \};}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \textcolor{keyword}{class\ }ApiWorker\ :\ \textcolor{keyword}{public}\ QObject}
\DoxyCodeLine{00043\ \{}
\DoxyCodeLine{00044\ \ \ \ \ Q\_OBJECT}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keyword}{explicit}\ ApiWorker(QObject\ *parent\ =\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00048\ \ \ \ \ \string~ApiWorker();}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \textcolor{keyword}{public}\ slots:}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{comment}{//\ Sloty\ wywoływane\ z\ wątku\ głównego\ do\ rozpoczęcia\ pracy}}
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{keywordtype}{void}\ doFetchAllStations();}
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{keywordtype}{void}\ doFetchSensorsForStation(\textcolor{keywordtype}{int}\ stationId);}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keywordtype}{void}\ doFetchMeasurementData(\textcolor{keywordtype}{int}\ sensorId);}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ signals:}
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{comment}{//\ Sygnały\ emitowane\ z\ wątku\ pracownika\ do\ wątku\ głównego\ z\ wynikami}}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keywordtype}{void}\ stationsReady(\textcolor{keyword}{const}\ QList<StationInfo>\&\ stations);}
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keywordtype}{void}\ sensorsReady(\textcolor{keyword}{const}\ QList<SensorInfo>\&\ sensors);}
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keywordtype}{void}\ measurementDataReady(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_measurement_data}{MeasurementData}}\&\ data);}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keywordtype}{void}\ errorOccurred(\textcolor{keyword}{const}\ QString\&\ errorString);\ \textcolor{comment}{//\ Sygnał\ błędu}}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \textcolor{keyword}{private}\ slots:}
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{comment}{//\ Prywatne\ sloty\ do\ obsługi\ odpowiedzi\ sieciowych\ W\ WĄTKU\ PRACOWNIKA}}
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keywordtype}{void}\ onFetchStationsFinished(QNetworkReply\ *reply);}
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keywordtype}{void}\ onFetchSensorsFinished(QNetworkReply\ *reply);}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keywordtype}{void}\ onFetchMeasurementDataFinished(QNetworkReply\ *reply);}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00070\ \ \ \ \ QNetworkAccessManager\ *networkManager;\ \textcolor{comment}{//\ Każdy\ wątek\ powinien\ mieć\ swój\ NAM}}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{comment}{//\ Metody\ parsowania\ (przeniesione\ z\ GiosApiClient)}}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keywordtype}{void}\ parseStationsJson(\textcolor{keyword}{const}\ QByteArray\&\ jsonData);}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keywordtype}{void}\ parseSensorsJson(\textcolor{keyword}{const}\ QByteArray\&\ jsonData,\ \textcolor{keywordtype}{int}\ stationId);}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keywordtype}{void}\ parseMeasurementDataJson(\textcolor{keyword}{const}\ QByteArray\&\ jsonData);}
\DoxyCodeLine{00076\ \};}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ APIWORKER\_H}}

\end{DoxyCode}
